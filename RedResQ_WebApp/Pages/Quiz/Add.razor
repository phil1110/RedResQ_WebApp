@page "/quiz/add"

<h3>Add a Quiz</h3>

<div class="container w-75">
    <h4>Core Information</h4>
    
    <div class="form-group">
        <label for="name">Quiz name:</label>
        <input disabled="@_disable" name="name" class="form-control" id="name" placeholder="Quiz name"@bind="_name"/>
        <br />
    </div>
    
    <div class="form-group">
        <label for="max-score">Max score:</label>
        <input disabled="@_disable" name="max-score" class="form-control" id="max-score" placeholder="Max score"@bind="_maxScore"/>
        <br />
    </div>
    
    <div class="element-set">
        <label for="input-quiztype">Quiz-Type</label>
        <div class="input-element">
            <InputSelect disabled="@_disable" class="form-control" TValue="QuizType?" @bind-Value="_quizType" id="input-quiztype">
                @if (QuizTypes != null)
                {
                    foreach (QuizType qt in QuizTypes)
                    {
                        <option value="@qt">@qt.Name</option>
                    }
                }
            </InputSelect>
        </div>
    </div>
    
    <br/>
    
    <button disabled="@_disable" @onclick="InitializeQuiz" class="btn btn-info">Initialise Quiz</button>

</div>

@code {
    private bool _disable = false;
    
    private string? _name;
    private int? _maxScore;
    private QuizType? _quizType;
    
    private QuizType[]? QuizTypes { get; set; }

    private Quiz _quiz = new Quiz();
    
    protected override async Task OnInitializedAsync()
    {
        QuizTypes = await QuizTypeService.Fetch();
    }

    private void InitializeQuiz()
    {
        _disable = true;

        _quiz.Name = _name;
        _quiz.MaxScore = _maxScore;
        _quiz.Type = _quizType;

    }
}