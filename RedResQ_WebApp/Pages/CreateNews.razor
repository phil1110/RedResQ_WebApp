@page "/createNews"
@attribute [Authorize(Roles = "Administrator")]
@using RedResQ_WebApp.Lib.Services

<div class="container mt-4">
    <h3>Publish News</h3>

    <div class="form-group">
        <label for="title">Title:</label>
        <input class="form-control" id="title" @bind="title" />
        <br />

    </div>

    <div class="form-group">
        <label for="content">Content:</label>
        <textarea class="form-control" id="content" @bind="content"></textarea>
        <br />

    </div>

    <div class="form-group">
        <label for="author">Author:</label>
        <input class="form-control" id="author" @bind="author" />
        <br />

    </div>

    
    @* <div class="form-group">
        <label for="date">Date:</label>
        <input class="form-control" type="datetime-local" id="date" @bind="date" />
        <br />

    </div> *@

    <div class="form-group">
        <label for="language">Language:</label>
        <input class="form-control" type="number" id="language" @bind="language" />
        <br />

    </div>

    <div class="form-group">
        <label for="image">Image:</label>
        <input class="form-control" type="number" id="image" @bind="image" />
        <br />

    </div>

    <div class="form-group">
        <label for="location">Location:</label>
        <input class="form-control" type="number" id="location" @bind="location" />
            <br />
        <br />

    </div>

    <button class="btn btn-primary" @onclick="CreateNewNews">Publish</button>
</div>

@code {
    private string title;
    private string content;
    private string author;
    // Soll Date überhaupt angegeben werden? 
    // Oder soll das der tag der Veröffentlichung sein
    // private DateTime date;
    private int language;
    private int image;
    private int location;

    private async Task CreateNewNews()
    {
        Console.WriteLine("CreateNewNews method called"); 

        DateTime currentDate = DateTime.Now;

        await NewsService.CreateNews(title, content, author, /*date*/ currentDate, language, image, location);
    }
}
