@page "/stats"
@using ChartJs.Blazor.PieChart


<PageTitle>Statistics</PageTitle>

@* <Chart Config="_pieConfig"></Chart>
 *@

<ul class="nav nav-tabs">
	<li class="nav-item">
		<button class="nav-link @(activeTab == "pie" ? "active" : "")" @onclick="@(() => SetActiveTab("pie"))">Pie Chart</button>
	</li>
	<li class="nav-item">
		<button class="nav-link @(activeTab == "bar" ? "active" : "")" @onclick="@(() => SetActiveTab("bar"))">Bar Chart</button>
	</li>
</ul>

@if (activeTab == "pie")
{
	<div>
		<h3>Pie Chart</h3>
		<Chart Config="_pieConfig"></Chart>
	</div>
}
else if (activeTab == "bar")
{
	<div>
		<h3>Bar Chart</h3>
	</div>
}


@code {
	private PieConfig _pieConfig; 
	private string activeTab = "pie";

	protected override void OnInitialized()
	{
		ConfigurePieConfig();
	}

	private void SetActiveTab(string tabName)
	{
		activeTab = tabName;
		StateHasChanged();

	}

	private void ConfigurePieConfig()
	{
		_pieConfig = new PieConfig();

		_pieConfig.Options = new PieOptions
		{
			Responsive = true,
			Title = new OptionsTitle
			{
				Display = true,
				Text = "First PieChart"
			}
		};

		foreach (var quiz in new[] { "Earthquake", "Tornado", "Tsunami", "Flood", "Vulcano" })
		{
			_pieConfig.Data.Labels.Add(quiz);
		}

		var dataset = new PieDataset<int>(new[] { 35, 50, 15, 45, 10 })
		{
			BackgroundColor = new[]
			{
				ColorUtil.ColorHexString(255, 215, 0),
				ColorUtil.ColorHexString(0, 206, 209),
				ColorUtil.ColorHexString(255, 111, 97),
				ColorUtil.ColorHexString(144, 238, 144),
				ColorUtil.ColorHexString(255, 0, 255)
			}
		};

		_pieConfig.Data.Datasets.Add(dataset);
	}

	
}
